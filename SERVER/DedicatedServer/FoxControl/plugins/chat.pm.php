<?php//* chat.pm.php - Personal Messages//* Version:   0.9.0//* Coded by:  cyrilw//* Copyright: FoxRace, http://www.fox-control.decontrol::RegisterEvent('Chat', 'pmchat');function pmchat($control, $Chat){	$Command = explode(' ', $Chat[2]);	if($Command[0]=='/pm'){		$control->client->query('GetDetailedPlayerInfo', $Chat[1]);		$CommandAuthor = $control->client->getResponse();				$control->client->query('GetPlayerList', 300, 0);		$player_list = $control->client->getResponse();		$cid = 0;		$is_player = false;		while(isset($player_list[$cid])){			if($player_list[$cid]['Login']==$Command[1]){				$is_player = true;				$control->client->query('GetDetailedPlayerInfo', $player_list[$cid]['Login']);				$pmplayer = $control->client->getResponse();				break;			}			$cid++;		}		if($is_player==true){			$curr_id = 2;			$message = '';			while(isset($Command[$curr_id])){				$message = $message.' '.$Command[$curr_id];				$curr_id++;			}						$control->client->query('ChatSendServerMessageToLogin', '$09f|PM $fff'.$CommandAuthor['NickName'].'$z$s$09f->$fff '.$pmplayer['NickName'].'$z$s$09f| $ee0'.$message, $Command[1]);			$control->client->query('ChatSendServerMessageToLogin', '$09f|PM $fff'.$CommandAuthor['NickName'].'$z$s$09f->$fff '.$pmplayer['NickName'].'$z$s$09f| $ee0'.$message, $CommandAuthor['Login']);		}		else $control->client->query('ChatSendServerMessageToLogin', '$09f|PM| $f00Error: $fff'.$Command[1].' $fffisn\'t a valid Login!', $CommandAuthor['Login']);	}}?>